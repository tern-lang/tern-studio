define(["require","exports","jquery","dialog","common"],function(r,a,n,h,p){(function(a){function c(){h.DialogBuilder.createListDialog(function(b,d,k,g){q(b,k,g)},null,"Open Project","",function(){setTimeout(c,500)})}function q(b,d,k){n.ajax({success:function(g){var e=[],a=[],f;for(f in g)g.hasOwnProperty(f)&&p.Common.stringStartsWith(f,b)&&a.push(f);a.sort();k&&1==k&&-1==a.indexOf(b)&&(document.location=l(b));for(f=0;f<a.length;f++){var c=a[f],h=g[c],m=l(c);e.push([{text:c+"\x26nbsp;\x26nbsp;",link:m,
style:"projectNode"},{text:"\x3ci style\x3d'opacity: 0.5'\x3e"+h+"\x3c/i\x3e",link:m,style:"folderNode"}])}d(e,b)},error:function(a){d([],b);console.log("Could not complete outline for text '"+b+"'")},async:!0,processData:!1,type:"GET",url:"/projects/list"})}function l(a){var d=window.document.location.hostname,b=window.document.location.port,c=window.document.location.search,e="http://";0==window.document.location.protocol.indexOf("https")&&(e="https://");e+=d;0<=b-parseFloat(b)+1&&(e=e+":"+b);return e+
("/project/"+a)+c}a.showProjectDialog=c;a.showProjectTreeDialog=function(){h.DialogBuilder.createTreeOpenDialog(function(a,d){""!=d&&null!=d?(console.log("Opening "+d+" "+address),document.location=l(d)):setTimeout(c,500)},function(){setTimeout(c,500)},"Open Project","Open","/")}})(a.ProjectSelector||(a.ProjectSelector={}))});
