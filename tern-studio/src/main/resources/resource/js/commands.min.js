define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(J,u,r,g,t,v,h,q,k,m,n,l,x,F){(function(c){function u(a){return a&&g.Common.stringEndsWith(a,".jar")}function z(a,b){var d=g.Common.stringReplaceText(a,"\\","/"),f=b.substring(0,b.lastIndexOf(".")),e=b.substring(b.lastIndexOf(".")+1);return"/decompile/"+d+"/"+f+"/"+e+".java"}function G(a,b){a&&1<a.length?r.ajax({url:"/type/"+g.Common.getProjectName()+"?expression\x3d"+a,
success:function(d){var f=[],e;for(e in d)d.hasOwnProperty(e)&&f.push(e);f.sort();e=[];for(var c=0;c<f.length;c++){var p=d[f[c]],p={name:p.name,resource:p.resource,module:p.module,extra:p.extra,type:p.type,project:g.Common.getProjectName()};e.push(p)}b(e,a)},async:!0}):b([],a)}function H(a,b){if(a||""==a){var d=k.FileEditor.getCurrentLineForEditor(),f=k.FileEditor.currentEditorState(),e=JSON.stringify({resource:f.getResource().getProjectPath(),line:d,complete:a.trim(),source:f.getSource()});r.ajax({contentType:"application/json",
data:e,dataType:"json",success:function(d){d=d.outlines;var f=[],e;for(e in d)if(d.hasOwnProperty(e)){var c=d[e];f.push({name:e,type:c.type,resource:c.resource,line:c.line,constraint:c.constraint,declaringClass:c.declaringClass,libraryPath:c.libraryPath})}b(f,a)},error:function(d){b([],a);console.log("Could not complete outline for text '"+a+"'",e)},async:!0,processData:!1,type:"POST",url:"/outline/"+g.Common.getProjectName()})}else b([],a)}function A(a,b){b||(b="*.tern,*.properties,*.xml,*.txt,*.json");
var d=l.DialogBuilder.createTextSearchOnlyDialog;a&&(d=l.DialogBuilder.createTextSearchAndReplaceDialog);d(function(a,b,d,c){B(a,b,d,function(a,b){for(var d=[],f=0;f<a.length;f++){var e=a[f],p=window.document.location.pathname;p.indexOf(";debug",p.length-6);var p=m.FileTree.cleanResourcePath("/resource/"+e.project+"/"+e.resource),g={text:m.FileTree.cleanResourcePath(e.resource),line:e.line,resource:p,style:"resourceNode"};d.push([g,{text:e.text,line:e.line,resource:p,style:"textNode"}])}return c(d,
b)})},b,a?"Replace Text":"Find Text")}function B(a,b,d,f){if(a&&0<a.length){var e;e="/find/"+g.Common.getProjectName();e+="?expression\x3d"+encodeURIComponent(a);e+="\x26pattern\x3d"+encodeURIComponent(b);e+="\x26caseSensitive\x3d"+encodeURIComponent(d.caseSensitive);e+="\x26regularExpression\x3d"+encodeURIComponent(d.regularExpression);e+="\x26wholeWord\x3d"+encodeURIComponent(d.wholeWord);e+="\x26replace\x3d"+encodeURIComponent(d.replace);e+="\x26enableReplace\x3d"+encodeURIComponent(d.enableReplace);
r.ajax({url:e,success:function(b){for(var d=[],e=0;e<b.length;e++){var c=b[e];g.Common.getProjectName();d.push(c)}f(d,a)},async:!0})}else f([],a)}function I(a,b){a&&1<a.length?r.ajax({url:"/file/"+g.Common.getProjectName()+"?expression\x3d"+a,success:function(d){for(var f=[],e=0;e<d.length;e++){var c=d[e];m.FileTree.cleanResourcePath(c.resource);g.Common.getProjectName();f.push(c)}b(f,a)},async:!0}):b([],a)}function C(a,b){if(null==k.FileEditor.currentEditorState().getResource())l.DialogBuilder.openTreeDialog(null,
!1,function(d){d=D(a);b(d)});else if(k.FileEditor.isEditorChanged()){var d=D(a);b(d)}else q.ProcessConsole.clearConsole(),b(function(){})}function D(a){var b=k.FileEditor.currentEditorState(),d=b.getResource();if(null!=d){var f={project:g.Common.getProjectName(),resource:d.getFilePath(),source:b.getSource(),directory:!1,create:!1};q.ProcessConsole.clearConsole();h.EventBus.sendEvent("SAVE",f);if(a)return function(){var a=(new Date).getTime(),a=new x.FileResource(d,null,a,b.getSource(),null,!1,!1);
console.log("Saving editor "+d);k.FileEditor.updateEditor(a)}}return function(){}}function w(a,b){C(!0,function(d){setTimeout(function(){if(b){var f=function(){setTimeout(function(){k.FileEditor.focusEditor();k.FileEditor.focusEditor();d()},50)};a?v.Alerts.createDebugPromptAlert("Debug","Enter arguments","Debug","Cancel",function(a){y(!0,a);f()},function(a){f()}):v.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){y(!1,a);f()},function(a){f()})}else y(a,""),d()},1)})}
function y(a,b){var d=k.FileEditor.currentEditorState(),f=b.split(/[ ]+/),d={breakpoints:d.getBreakpoints(),arguments:f,project:g.Common.getProjectName(),resource:d.getResource().getFilePath(),source:d.getSource(),debug:a?!0:!1};h.EventBus.sendEvent("EXECUTE",d)}var E={};c.addWindowHandle=function(a,b){var d=E[a];d&&d.close();E[a]=b};c.searchTypes=function(){l.DialogBuilder.createListDialog(function(a,b,d){G(a,function(a,b){for(var c=[],f=0;f<a.length;f++){var e=window.document.location.pathname,
e=-1!==e.indexOf(";debug",e.length-6),g="/project/"+a[f].project,h="\x3ci style\x3d'opacity: 0.5'\x3e"+a[f].module+"\x3ci\x3e",k="";a[f].extra&&(k="\x3ci style\x3d'opacity: 0.5'\x3e"+a[f].extra+"\x3ci\x3e");e&&(g+=";debug");g=u(a[f].extra)?g+("#"+z(a[f].extra,a[f].module+"."+a[f].name)):g+("#"+m.FileTree.cleanResourcePath(a[f].resource));c.push([{text:a[f].name+"\x26nbsp;\x26nbsp;"+h,link:g,line:0,style:"module"==a[f].type?"moduleNode":"typeNode"},{text:a[f].resource+"\x26nbsp;\x26nbsp;"+k,link:g,
line:0,style:"resourceNode"}])}d(c,b)})},null,"Search Types")};c.searchOutline=function(){l.DialogBuilder.createListDialog(function(a,b,d){H(a,function(a,b){for(var c=[],f=0;f<a.length;f++){var e=a[f],h=e.type.toLowerCase(),k="\x3ci style\x3d'opacity: 0.5'\x3e"+e.constraint+"\x3ci\x3e",l;l=e.declaringClass;l=l.substring(l.lastIndexOf(".")+1);var n=e.declaringClass,n="\x3ci style\x3d'opacity: 0.5'\x3e"+n.substring(0,n.lastIndexOf("."))+"\x3ci\x3e",q=e.resource,r=e.line,t=null;u(e.libraryPath)&&e.declaringClass?
(t="/project/"+g.Common.getProjectName()+"#"+z(e.libraryPath,e.declaringClass),r=null):q=m.FileTree.cleanResourcePath("/resource/"+g.Common.getProjectName()+q);c.push([{text:e.name+"\x26nbsp;\x26nbsp;"+k,resource:q,link:t,line:r,style:"function"==h?"functionNode":"propertyNode"},{text:l+"\x26nbsp;\x26nbsp;"+n,resource:q,link:t,line:r,style:"resourceNode"}])}d(c,b)})},null,"Search Outline")};c.replaceTokenInFiles=function(a,b,d){B(a,d,b,function(a){for(var b=k.FileEditor.currentEditorState(),d=0;d<
a.length;d++){var c=a[d],c=m.FileTree.createResourcePath("/resource/"+c.project+"/"+c.resource);b.getResource().getResourcePath()==c.getResourcePath()&&x.FileExplorer.openTreeFile(c.getResourcePath(),function(){})}})};c.searchFiles=function(a){A(!1,a)};c.searchAndReplaceFiles=function(a){A(!0,a)};c.findFileNames=function(){l.DialogBuilder.createListDialog(function(a,b,d){I(a,function(a,b){for(var c=[],f=0;f<a.length;f++){var e=a[f],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-
6),h="/project/"+e.project;g&&(h+=";debug");h+="#"+m.FileTree.cleanResourcePath(e.resource);c.push([{text:e.text,name:e.name,link:h,style:"resourceNode"}])}return d(c,b)})},null,"Find Files")};c.openTerminal=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:g.Common.getProjectName(),resource:a.getFilePath(),terminal:!0},h.EventBus.sendEvent("EXPLORE",a))};c.exploreDirectory=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:g.Common.getProjectName(),resource:a.getFilePath(),
terminal:!1},h.EventBus.sendEvent("EXPLORE",a))};c.folderExpand=function(a){a={project:g.Common.getProjectName(),folder:a};h.EventBus.sendEvent("FOLDER_EXPAND",a)};c.folderCollapse=function(a){a={project:g.Common.getProjectName(),folder:a};h.EventBus.sendEvent("FOLDER_COLLAPSE",a)};c.pingProcess=function(){h.EventBus.isSocketOpen()&&h.EventBus.sendEvent("PING",g.Common.getProjectName())};c.uploadFileTo=function(a,b,d){b=m.FileTree.createResourcePath(b);b=m.FileTree.cleanResourcePath(b.getFilePath()+
"/"+a);console.log("source: "+a+" destination: "+b);a={project:g.Common.getProjectName(),name:a,to:b,data:d,dragAndDrop:!0};h.EventBus.sendEvent("UPLOAD",a)};c.isDragAndDropFilePossible=function(a,b){return!0};c.dragAndDropFile=function(a,b){var d=a.getResource(),c=b.getResource(),e=m.FileTree.cleanResourcePath(d.getFilePath()),c=m.FileTree.cleanResourcePath(c.getFilePath()+"/"+d.getFileName());console.log("source: "+e+" destination: "+c);var k={project:g.Common.getProjectName(),from:e,to:c,dragAndDrop:!0};
h.EventBus.sendEvent("RENAME",k);if(a.isFolder())for(d=a.getChildren(),k=0;k<d.length;k++){var l=d[k],n=g.Common.stringReplaceText(l,e,c);t.Project.renameEditorTab(m.FileTree.createResourcePath(l),m.FileTree.createResourcePath(n))}else t.Project.renameEditorTab(d,m.FileTree.createResourcePath(c))};c.renameFile=function(a){var b=a.getFilePath();l.DialogBuilder.renameFileTreeDialog(a,!0,function(d){var c={project:g.Common.getProjectName(),from:b,to:d.getFilePath(),dragAndDrop:!1};h.EventBus.sendEvent("RENAME",
c);t.Project.renameEditorTab(a,d)})};c.renameDirectory=function(a){var b=a.getFilePath();a=m.FileTree.createResourcePath(b+".#");l.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:g.Common.getProjectName(),from:b,to:a.getFilePath()};h.EventBus.sendEvent("RENAME",a)})};c.newFile=function(a){l.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!m.FileTree.isResourceFolder(a.getFilePath())){var b={project:g.Common.getProjectName(),resource:a.getFilePath(),source:"",directory:!1,create:!0};
q.ProcessConsole.clearConsole();h.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new x.FileResource(a,null,b,"",null,!1,!1);k.FileEditor.updateEditor(a)}})};c.newDirectory=function(a){l.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:g.Common.getProjectName(),resource:a.getFilePath(),source:"",directory:!0,create:!0},q.ProcessConsole.clearConsole(),h.EventBus.sendEvent("SAVE",a))})};c.saveFile=function(){C(!0,function(a){a()})};
c.saveEditorOnClose=function(a,b){null!=b&&b.getResourcePath()&&l.DialogBuilder.openTreeDialog(b,!0,function(d){d={project:g.Common.getProjectName(),resource:b.getFilePath(),source:a,directory:!1,create:!1};h.EventBus.sendEvent("SAVE",d);k.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},function(a){k.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};c.deleteFile=function(a){var b=k.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=b.getResource());null!=a&&(b="Delete resource "+
a.getFilePath(),v.Alerts.createConfirmAlert("Delete File",b,"Delete","Cancel",function(){var b={project:g.Common.getProjectName(),resource:a.getFilePath()};q.ProcessConsole.clearConsole();h.EventBus.sendEvent("DELETE",b);t.Project.deleteEditorTab(a.getResourcePath())},function(){}))};c.deleteDirectory=function(a){null!=a&&(a={project:g.Common.getProjectName(),resource:a.getFilePath()},q.ProcessConsole.clearConsole(),h.EventBus.sendEvent("DELETE",a))};c.createArchive=function(a,b){l.DialogBuilder.createArchiveTreeDialog(a,
function(a){a={project:g.Common.getProjectName(),resource:b.getProjectPath(),archive:a.getProjectPath()};h.EventBus.sendEvent("CREATE_ARCHIVE",a)})};c.runScript=function(){w(!1,!1)};c.runScriptWithArguments=function(){w(!1,!0)};c.debugScript=function(){w(!0,!1)};c.debugScriptWithArguments=function(){w(!0,!0)};c.attachRemoteDebugger=function(){h.EventBus.isSocketOpen()&&v.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e","Attach","Cancel",function(a){a={project:g.Common.getProjectName(),
address:a};h.EventBus.sendEvent("REMOTE_DEBUG",a)})};c.updateScriptBreakpoints=function(){var a={breakpoints:k.FileEditor.currentEditorState().getBreakpoints(),project:g.Common.getProjectName()};h.EventBus.sendEvent("BREAKPOINTS",a)};c.stepOverScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},k.FileEditor.clearEditorHighlights(),h.EventBus.sendEvent("STEP",a))};c.stepInScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),
type:"STEP_IN"},k.FileEditor.clearEditorHighlights(),h.EventBus.sendEvent("STEP",a))};c.stepOutScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},k.FileEditor.clearEditorHighlights(),h.EventBus.sendEvent("STEP",a))};c.resumeScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},k.FileEditor.clearEditorHighlights(),h.EventBus.sendEvent("STEP",a))};c.stopScript=function(){h.EventBus.sendEvent("STOP")};
c.browseScriptVariables=function(a){var b=n.ThreadManager.focusedThread();null!=b&&(a={thread:b.getThread(),expand:a},h.EventBus.sendEvent("BROWSE",a))};c.browseScriptEvaluation=function(a,b,d){var c=n.ThreadManager.focusedThread();null!=c&&(a={thread:c.getThread(),expression:b,expand:a,refresh:d},h.EventBus.sendEvent("EVALUATE",a))};c.attachProcess=function(a){var b=F.DebugManager.currentStatusFocus(),c=k.FileEditor.currentEditorState();a={process:a,breakpoints:c.getBreakpoints(),project:g.Common.getProjectName(),
focus:b!=a};h.EventBus.sendEvent("ATTACH",a)};c.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};c.updateDisplay=function(a){h.EventBus.isSocketOpen()&&h.EventBus.sendEvent("DISPLAY_UPDATE",a)};c.evaluateExpression=function(){if(null!=n.ThreadManager.focusedThread()){var a=k.FileEditor.getSelectedText();l.DialogBuilder.evaluateExpressionDialog(a)}};
c.refreshScreen=function(){setTimeout(function(){location.reload()},10)};c.switchProject=function(){document.location="/"}})(u.Command||(u.Command={}))});
