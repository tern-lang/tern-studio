define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(L,u,r,h,v,w,g,q,k,m,n,l,y,H){(function(b){function u(a){return a&&h.Common.stringEndsWith(a,".jar")}function C(a,d){var c=h.Common.stringReplaceText(a,"\\","/"),e=z(d),f=A(d);return"/decompile/"+c+"/"+e+"/"+f+".java"}function z(a){return a.substring(0,a.lastIndexOf("."))}function A(a){return a.substring(a.lastIndexOf(".")+1)}function I(a,d){a&&1<a.length?r.ajax({url:"/type/"+
h.Common.getProjectName()+"?expression\x3d"+a,success:function(c){var e=[],f;for(f in c)c.hasOwnProperty(f)&&e.push(f);e.sort();f=[];for(var b=0;b<e.length;b++){var p=c[e[b]],p={name:p.name,resource:p.resource,module:p.module,extra:p.extra,type:p.type,project:h.Common.getProjectName()};f.push(p)}d(f,a)},async:!0}):d([],a)}function J(a,d){if(a||""==a){var c=k.FileEditor.getCurrentLineForEditor(),e=k.FileEditor.currentEditorState(),b=JSON.stringify({resource:e.getResource().getProjectPath(),line:c,
complete:a.trim(),source:e.getSource()});r.ajax({contentType:"application/json",data:b,dataType:"json",success:function(c){c=c.outlines;var e=[],b;for(b in c)if(c.hasOwnProperty(b)){var f=c[b];e.push({name:b,type:f.type,resource:f.resource,line:f.line,constraint:f.constraint,declaringClass:f.declaringClass,libraryPath:f.libraryPath})}d(e,a)},error:function(c){d([],a);console.log("Could not complete outline for text '"+a+"'",b)},async:!0,processData:!1,type:"POST",url:"/outline/"+h.Common.getProjectName()})}else d([],
a)}function D(a,d){d||(d="*.tern,*.properties,*.xml,*.txt,*.json");var c=l.DialogBuilder.createTextSearchOnlyDialog;a&&(c=l.DialogBuilder.createTextSearchAndReplaceDialog);c(function(a,c,d,b){E(a,c,d,function(a,c){for(var d=[],e=0;e<a.length;e++){var f=a[e],p=window.document.location.pathname;p.indexOf(";debug",p.length-6);var p=m.FileTree.cleanResourcePath("/resource/"+f.project+"/"+f.resource),h={text:m.FileTree.cleanResourcePath(f.resource),line:f.line,resource:p,style:"resourceNode"};d.push([h,
{text:f.text,line:f.line,resource:p,style:"textNode"}])}return b(d,c)})},d,a?"Replace Text":"Find Text")}function E(a,d,c,e){if(a&&0<a.length){var b;b="/find/"+h.Common.getProjectName();b+="?expression\x3d"+encodeURIComponent(a);b+="\x26pattern\x3d"+encodeURIComponent(d);b+="\x26caseSensitive\x3d"+encodeURIComponent(c.caseSensitive);b+="\x26regularExpression\x3d"+encodeURIComponent(c.regularExpression);b+="\x26wholeWord\x3d"+encodeURIComponent(c.wholeWord);b+="\x26replace\x3d"+encodeURIComponent(c.replace);
b+="\x26enableReplace\x3d"+encodeURIComponent(c.enableReplace);r.ajax({url:b,success:function(c){for(var d=[],b=0;b<c.length;b++){var f=c[b];h.Common.getProjectName();d.push(f)}e(d,a)},async:!0})}else e([],a)}function K(a,d){a&&1<a.length?r.ajax({url:"/file/"+h.Common.getProjectName()+"?expression\x3d"+a,success:function(c){for(var e=[],b=0;b<c.length;b++){var g=c[b];m.FileTree.cleanResourcePath(g.resource);h.Common.getProjectName();e.push(g)}d(e,a)},async:!0}):d([],a)}function F(a,d){if(null==k.FileEditor.currentEditorState().getResource())l.DialogBuilder.openTreeDialog(null,
!1,function(c){c=G(a);d(c)});else if(k.FileEditor.isEditorChanged()){var c=G(a);d(c)}else q.ProcessConsole.clearConsole(),d(function(){})}function G(a){var d=k.FileEditor.currentEditorState(),c=d.getResource();if(null!=c){var e={project:h.Common.getProjectName(),resource:c.getFilePath(),source:d.getSource(),directory:!1,create:!1};q.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",e);if(a)return function(){var a=(new Date).getTime(),a=new y.FileResource(c,null,a,d.getSource(),null,!1,!1);
console.log("Saving editor "+c);k.FileEditor.updateEditor(a)}}return function(){}}function x(a,d){F(!0,function(c){setTimeout(function(){if(d){var e=function(){setTimeout(function(){k.FileEditor.focusEditor();k.FileEditor.focusEditor();c()},50)};a?w.Alerts.createDebugPromptAlert("Debug","Enter arguments","Debug","Cancel",function(a){B(!0,a);e()},function(a){e()}):w.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){B(!1,a);e()},function(a){e()})}else B(a,""),c()},1)})}
function B(a,d){var c=k.FileEditor.currentEditorState(),e=d.split(/[ ]+/),c={breakpoints:c.getBreakpoints(),arguments:e,project:h.Common.getProjectName(),resource:c.getResource().getFilePath(),source:c.getSource(),debug:a?!0:!1};g.EventBus.sendEvent("EXECUTE",c)}b.openTreeFile=function(a){g.EventBus.sendEvent("OPEN",{project:h.Common.getProjectName(),resource:a})};b.openChildWindow=function(a,d){var c=window.document.location.port,e=window.document.location.protocol+"//"+window.document.location.hostname;
0<=c-parseFloat(c)+1&&(e=e+":"+c);e+=a;d?g.EventBus.sendEvent("LAUNCH",{address:e,session:h.Common.extractCookie("SESSID")}):g.EventBus.sendEvent("LAUNCH",{address:e,session:h.Common.createTimeStamp()})};b.openTerminal=function(a){if(m.FileTree.isResourceFolder(a.getFilePath())){var d=window.document.location.port,c=window.document.location.protocol+"//"+window.document.location.hostname;0<=d-parseFloat(d)+1&&(c=c+":"+d);c+="/terminal/"+h.Common.getProjectName()+a.getFilePath();g.EventBus.sendEvent("LAUNCH",
{address:c,session:h.Common.extractCookie("SESSID")})}};b.formatEditorSource=function(){var a=k.FileEditor.currentEditorState(),d=a.getSource(),c=a.getResource().getFilePath();r.ajax({contentType:"text/plain",data:d,success:function(a){a!=d&&k.FileEditor.sneakyUpdateEditor(a)},error:function(){console.log("Format failed for "+c)},processData:!1,type:"POST",url:"/format/"+h.Common.getProjectName()+c})};b.exploreDirectory=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:h.Common.getProjectName(),
resource:a.getFilePath(),terminal:!1},g.EventBus.sendEvent("EXPLORE",a))};b.searchTypes=function(){l.DialogBuilder.createListDialog(function(a,d,c){I(a,function(a,d){for(var b=[],e=0;e<a.length;e++){var g=window.document.location.pathname,f=-1!==g.indexOf(";debug",g.length-6),k="/project/"+a[e].project,g="\x3ci style\x3d'opacity: 0.5'\x3e"+a[e].module+"\x3ci\x3e",l="";a[e].extra&&(l="\x3ci style\x3d'opacity: 0.5'\x3e"+a[e].extra+"\x3ci\x3e");f&&(k+=";debug");if(u(a[e].extra))var f=a[e].module,n=a[e].name,
k=k+("#"+C(a[e].extra,f+"."+n));else if(f=a[e].resource,f=a[e].extra?h.Common.stringStartsWith(f,"java.")||h.Common.stringStartsWith(f,"jdk."):!1,f)var f=a[e].module,n=a[e].name,t=f+"."+n,f=h.Common.stringReplaceText(a[e].extra,"\\","/"),n=z(t),t=A(t),k=k+("#"+("/decompile/"+f+"/"+n+"/"+t+".java"));else k+="#"+m.FileTree.cleanResourcePath(a[e].resource);b.push([{text:a[e].name+"\x26nbsp;\x26nbsp;"+g,link:k,line:0,style:"module"==a[e].type?"moduleNode":"typeNode"},{text:a[e].resource+"\x26nbsp;\x26nbsp;"+
l,link:k,line:0,style:"resourceNode"}])}c(b,d)})},null,"Search Types")};b.searchOutline=function(){l.DialogBuilder.createListDialog(function(a,d,c){J(a,function(a,d){for(var b=[],e=0;e<a.length;e++){var f=a[e],g=f.type.toLowerCase(),k="\x3ci style\x3d'opacity: 0.5'\x3e"+f.constraint+"\x3ci\x3e",l=A(f.declaringClass),n="\x3ci style\x3d'opacity: 0.5'\x3e"+z(f.declaringClass)+"\x3ci\x3e",t=f.resource,q=f.line,r=null;u(f.libraryPath)&&f.declaringClass?(r="/project/"+h.Common.getProjectName()+"#"+C(f.libraryPath,
f.declaringClass),q=null):t=m.FileTree.cleanResourcePath("/resource/"+h.Common.getProjectName()+t);b.push([{text:f.name+"\x26nbsp;\x26nbsp;"+k,resource:t,link:r,line:q,style:"function"==g?"functionNode":"propertyNode"},{text:l+"\x26nbsp;\x26nbsp;"+n,resource:t,link:r,line:q,style:"resourceNode"}])}c(b,d)})},null,"Search Outline")};b.replaceTokenInFiles=function(a,d,c){E(a,c,d,function(a){for(var d=k.FileEditor.currentEditorState(),c=0;c<a.length;c++){var b=a[c],b=m.FileTree.createResourcePath("/resource/"+
b.project+"/"+b.resource);d.getResource().getResourcePath()==b.getResourcePath()&&y.FileExplorer.openTreeFile(b.getResourcePath(),function(){})}})};b.searchFiles=function(a){D(!1,a)};b.searchAndReplaceFiles=function(a){D(!0,a)};b.findFileNames=function(){l.DialogBuilder.createListDialog(function(a,d,c){K(a,function(a,d){for(var b=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+m.FileTree.cleanResourcePath(f.resource);
b.push([{text:f.text,name:f.name,link:h,style:"resourceNode"}])}return c(b,d)})},null,"Find Files")};b.folderExpand=function(a){a={project:h.Common.getProjectName(),folder:a};g.EventBus.sendEvent("FOLDER_EXPAND",a)};b.folderCollapse=function(a){a={project:h.Common.getProjectName(),folder:a};g.EventBus.sendEvent("FOLDER_COLLAPSE",a)};b.pingProcess=function(){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("PING",h.Common.getProjectName())};b.uploadFileTo=function(a,d,c){d=m.FileTree.createResourcePath(d);
d=m.FileTree.cleanResourcePath(d.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+d);a={project:h.Common.getProjectName(),name:a,to:d,data:c,dragAndDrop:!0};g.EventBus.sendEvent("UPLOAD",a)};b.isDragAndDropFilePossible=function(a,d){return!0};b.dragAndDropFile=function(a,d){var c=a.getResource(),b=d.getResource(),f=m.FileTree.cleanResourcePath(c.getFilePath()),b=m.FileTree.cleanResourcePath(b.getFilePath()+"/"+c.getFileName());console.log("source: "+f+" destination: "+b);var k={project:h.Common.getProjectName(),
from:f,to:b,dragAndDrop:!0};g.EventBus.sendEvent("RENAME",k);if(a.isFolder())for(c=a.getChildren(),k=0;k<c.length;k++){var l=c[k],n=h.Common.stringReplaceText(l,f,b);v.Project.renameEditorTab(m.FileTree.createResourcePath(l),m.FileTree.createResourcePath(n))}else v.Project.renameEditorTab(c,m.FileTree.createResourcePath(b))};b.renameFile=function(a){var d=a.getFilePath();l.DialogBuilder.renameFileTreeDialog(a,!0,function(c){var b={project:h.Common.getProjectName(),from:d,to:c.getFilePath(),dragAndDrop:!1};
g.EventBus.sendEvent("RENAME",b);v.Project.renameEditorTab(a,c)})};b.renameDirectory=function(a){var d=a.getFilePath();a=m.FileTree.createResourcePath(d+".#");l.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:h.Common.getProjectName(),from:d,to:a.getFilePath()};g.EventBus.sendEvent("RENAME",a)})};b.newFile=function(a){l.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!m.FileTree.isResourceFolder(a.getFilePath())){var c={project:h.Common.getProjectName(),resource:a.getFilePath(),
source:"",directory:!1,create:!0};q.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",c);c=(new Date).getTime();a=new y.FileResource(a,null,c,"",null,!1,!1);k.FileEditor.updateEditor(a)}})};b.newDirectory=function(a){l.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:h.Common.getProjectName(),resource:a.getFilePath(),source:"",directory:!0,create:!0},q.ProcessConsole.clearConsole(),g.EventBus.sendEvent("SAVE",a))})};b.saveFile=
function(){F(!0,function(a){a()})};b.saveEditorOnClose=function(a,b){null!=b&&b.getResourcePath()&&l.DialogBuilder.openTreeDialog(b,!0,function(c){c={project:h.Common.getProjectName(),resource:b.getFilePath(),source:a,directory:!1,create:!1};g.EventBus.sendEvent("SAVE",c);k.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},function(a){k.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};b.deleteFile=function(a){var b=k.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=
b.getResource());null!=a&&(b="Delete resource "+a.getFilePath(),w.Alerts.createConfirmAlert("Delete File",b,"Delete","Cancel",function(){var b={project:h.Common.getProjectName(),resource:a.getFilePath()};q.ProcessConsole.clearConsole();g.EventBus.sendEvent("DELETE",b);v.Project.deleteEditorTab(a.getResourcePath())},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:h.Common.getProjectName(),resource:a.getFilePath()},q.ProcessConsole.clearConsole(),g.EventBus.sendEvent("DELETE",a))};
b.createArchive=function(a,b){l.DialogBuilder.createArchiveTreeDialog(a,function(a){a={project:h.Common.getProjectName(),resource:b.getProjectPath(),archive:a.getProjectPath()};g.EventBus.sendEvent("CREATE_ARCHIVE",a)})};b.runScript=function(){x(!1,!1)};b.runScriptWithArguments=function(){x(!1,!0)};b.debugScript=function(){x(!0,!1)};b.debugScriptWithArguments=function(){x(!0,!0)};b.attachRemoteDebugger=function(){g.EventBus.isSocketOpen()&&w.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e",
"Attach","Cancel",function(a){a={project:h.Common.getProjectName(),address:a};g.EventBus.sendEvent("REMOTE_DEBUG",a)})};b.updateScriptBreakpoints=function(){var a={breakpoints:k.FileEditor.currentEditorState().getBreakpoints(),project:h.Common.getProjectName()};g.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.stepInScript=
function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_IN"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},k.FileEditor.clearEditorHighlights(),
g.EventBus.sendEvent("STEP",a))};b.stopScript=function(){g.EventBus.sendEvent("STOP")};b.browseScriptVariables=function(a){var b=n.ThreadManager.focusedThread();null!=b&&(a={thread:b.getThread(),expand:a},g.EventBus.sendEvent("BROWSE",a))};b.browseScriptEvaluation=function(a,b,c){var d=n.ThreadManager.focusedThread();null!=d&&(a={thread:d.getThread(),expression:b,expand:a,refresh:c},g.EventBus.sendEvent("EVALUATE",a))};b.attachProcess=function(a){var b=H.DebugManager.currentStatusFocus(),c=k.FileEditor.currentEditorState();
a={process:a,breakpoints:c.getBreakpoints(),project:h.Common.getProjectName(),focus:b!=a};g.EventBus.sendEvent("ATTACH",a)};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){g.EventBus.isSocketOpen()&&(a.session=h.Common.extractCookie("SESSID"),g.EventBus.sendEvent("DISPLAY_UPDATE",a))};b.evaluateExpression=
function(){if(null!=n.ThreadManager.focusedThread()){var a=k.FileEditor.getSelectedText();l.DialogBuilder.evaluateExpressionDialog(a)}};b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(u.Command||(u.Command={}))});
