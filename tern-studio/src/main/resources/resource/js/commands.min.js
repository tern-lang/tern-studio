define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(L,u,t,h,v,w,g,q,k,m,n,l,y,H){(function(e){function u(a){return a&&h.Common.stringEndsWith(a,".jar")}function C(a,c){var b=h.Common.stringReplaceText(a,"\\","/"),d=z(c),f=A(c);return"/decompile/"+b+"/"+d+"/"+f+".java"}function z(a){return a.substring(0,a.lastIndexOf("."))}function A(a){return a.substring(a.lastIndexOf(".")+1)}function I(a,c){a&&1<a.length?t.ajax({url:"/type/"+
h.Common.getProjectName()+"?expression\x3d"+a,success:function(b){var d=[],f;for(f in b)b.hasOwnProperty(f)&&d.push(f);d.sort();f=[];for(var e=0;e<d.length;e++){var p=b[d[e]],p={name:p.name,resource:p.resource,module:p.module,extra:p.extra,type:p.type,project:h.Common.getProjectName()};f.push(p)}c(f,a)},async:!0}):c([],a)}function J(a,c){if(a||""==a){var b=k.FileEditor.getCurrentLineForEditor(),d=k.FileEditor.currentEditorState(),f=JSON.stringify({resource:d.getResource().getProjectPath(),line:b,
complete:a.trim(),source:d.getSource()});t.ajax({contentType:"application/json",data:f,dataType:"json",success:function(b){b=b.outlines;var d=[],f;for(f in b)if(b.hasOwnProperty(f)){var e=b[f];d.push({name:f,type:e.type,resource:e.resource,line:e.line,constraint:e.constraint,declaringClass:e.declaringClass,libraryPath:e.libraryPath})}c(d,a)},error:function(b){c([],a);console.log("Could not complete outline for text '"+a+"'",f)},async:!0,processData:!1,type:"POST",url:"/outline/"+h.Common.getProjectName()})}else c([],
a)}function D(a,c){c||(c="*.tern,*.properties,*.xml,*.txt,*.json");var b=l.DialogBuilder.createTextSearchOnlyDialog;a&&(b=l.DialogBuilder.createTextSearchAndReplaceDialog);b(function(a,b,c,e){E(a,b,c,function(a,b){for(var c=[],d=0;d<a.length;d++){var f=a[d],p=window.document.location.pathname;p.indexOf(";debug",p.length-6);var p=m.FileTree.cleanResourcePath("/resource/"+f.project+"/"+f.resource),h={text:m.FileTree.cleanResourcePath(f.resource),line:f.line,resource:p,style:"resourceNode"};c.push([h,
{text:f.text,line:f.line,resource:p,style:"textNode"}])}return e(c,b)})},c,a?"Replace Text":"Find Text")}function E(a,c,b,d){if(a&&0<a.length){var f;f="/find/"+h.Common.getProjectName();f+="?expression\x3d"+encodeURIComponent(a);f+="\x26pattern\x3d"+encodeURIComponent(c);f+="\x26caseSensitive\x3d"+encodeURIComponent(b.caseSensitive);f+="\x26regularExpression\x3d"+encodeURIComponent(b.regularExpression);f+="\x26wholeWord\x3d"+encodeURIComponent(b.wholeWord);f+="\x26replace\x3d"+encodeURIComponent(b.replace);
f+="\x26enableReplace\x3d"+encodeURIComponent(b.enableReplace);t.ajax({url:f,success:function(b){for(var c=[],f=0;f<b.length;f++){var e=b[f];h.Common.getProjectName();c.push(e)}d(c,a)},async:!0})}else d([],a)}function K(a,c){a&&1<a.length?t.ajax({url:"/file/"+h.Common.getProjectName()+"?expression\x3d"+a,success:function(b){for(var d=[],f=0;f<b.length;f++){var e=b[f];m.FileTree.cleanResourcePath(e.resource);h.Common.getProjectName();d.push(e)}c(d,a)},async:!0}):c([],a)}function F(a,c){if(null==k.FileEditor.currentEditorState().getResource())l.DialogBuilder.openTreeDialog(null,
!1,function(b){b=G(a);c(b)});else if(k.FileEditor.isEditorChanged()){var b=G(a);c(b)}else q.ProcessConsole.clearConsole(),c(function(){})}function G(a){var c=k.FileEditor.currentEditorState(),b=c.getResource();if(null!=b){var d={project:h.Common.getProjectName(),resource:b.getFilePath(),source:c.getSource(),directory:!1,create:!1};q.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",d);if(a)return function(){var a=(new Date).getTime(),a=new y.FileResource(b,null,a,c.getSource(),null,!1,!1);
console.log("Saving editor "+b);k.FileEditor.updateEditor(a)}}return function(){}}function x(a,c){F(!0,function(b){setTimeout(function(){if(c){var d=function(){setTimeout(function(){k.FileEditor.focusEditor();k.FileEditor.focusEditor();b()},50)};a?w.Alerts.createDebugPromptAlert("Debug","Enter arguments","Debug","Cancel",function(a){B(!0,a);d()},function(a){d()}):w.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){B(!1,a);d()},function(a){d()})}else B(a,""),b()},1)})}
function B(a,c){var b=k.FileEditor.currentEditorState(),d=c.split(/[ ]+/),b={breakpoints:b.getBreakpoints(),arguments:d,project:h.Common.getProjectName(),resource:b.getResource().getFilePath(),source:b.getSource(),debug:a?!0:!1};g.EventBus.sendEvent("EXECUTE",b)}e.openChildWindow=function(a,c){var b=window.document.location.port,d=window.document.location.protocol+"//"+window.document.location.hostname,e=h.Common.extractCookie("SESSID");0<=b-parseFloat(b)+1&&(d=d+":"+b);g.EventBus.sendEvent("LAUNCH",
{address:d+a,session:e})};e.searchTypes=function(){l.DialogBuilder.createListDialog(function(a,c,b){I(a,function(a,c){for(var e=[],d=0;d<a.length;d++){var f=window.document.location.pathname,g=-1!==f.indexOf(";debug",f.length-6),k="/project/"+a[d].project,f="\x3ci style\x3d'opacity: 0.5'\x3e"+a[d].module+"\x3ci\x3e",l="";a[d].extra&&(l="\x3ci style\x3d'opacity: 0.5'\x3e"+a[d].extra+"\x3ci\x3e");g&&(k+=";debug");if(u(a[d].extra))var g=a[d].module,n=a[d].name,k=k+("#"+C(a[d].extra,g+"."+n));else if(g=
a[d].resource,g=a[d].extra?h.Common.stringStartsWith(g,"java.")||h.Common.stringStartsWith(g,"jdk."):!1,g)var g=a[d].module,n=a[d].name,r=g+"."+n,g=h.Common.stringReplaceText(a[d].extra,"\\","/"),n=z(r),r=A(r),k=k+("#"+("/decompile/"+g+"/"+n+"/"+r+".java"));else k+="#"+m.FileTree.cleanResourcePath(a[d].resource);e.push([{text:a[d].name+"\x26nbsp;\x26nbsp;"+f,link:k,line:0,style:"module"==a[d].type?"moduleNode":"typeNode"},{text:a[d].resource+"\x26nbsp;\x26nbsp;"+l,link:k,line:0,style:"resourceNode"}])}b(e,
c)})},null,"Search Types")};e.searchOutline=function(){l.DialogBuilder.createListDialog(function(a,c,b){J(a,function(a,c){for(var d=[],e=0;e<a.length;e++){var f=a[e],g=f.type.toLowerCase(),k="\x3ci style\x3d'opacity: 0.5'\x3e"+f.constraint+"\x3ci\x3e",l=A(f.declaringClass),n="\x3ci style\x3d'opacity: 0.5'\x3e"+z(f.declaringClass)+"\x3ci\x3e",r=f.resource,q=f.line,t=null;u(f.libraryPath)&&f.declaringClass?(t="/project/"+h.Common.getProjectName()+"#"+C(f.libraryPath,f.declaringClass),q=null):r=m.FileTree.cleanResourcePath("/resource/"+
h.Common.getProjectName()+r);d.push([{text:f.name+"\x26nbsp;\x26nbsp;"+k,resource:r,link:t,line:q,style:"function"==g?"functionNode":"propertyNode"},{text:l+"\x26nbsp;\x26nbsp;"+n,resource:r,link:t,line:q,style:"resourceNode"}])}b(d,c)})},null,"Search Outline")};e.replaceTokenInFiles=function(a,c,b){E(a,b,c,function(a){for(var c=k.FileEditor.currentEditorState(),b=0;b<a.length;b++){var d=a[b],d=m.FileTree.createResourcePath("/resource/"+d.project+"/"+d.resource);c.getResource().getResourcePath()==
d.getResourcePath()&&y.FileExplorer.openTreeFile(d.getResourcePath(),function(){})}})};e.searchFiles=function(a){D(!1,a)};e.searchAndReplaceFiles=function(a){D(!0,a)};e.findFileNames=function(){l.DialogBuilder.createListDialog(function(a,c,b){K(a,function(a,c){for(var d=[],e=0;e<a.length;e++){var f=a[e],g=window.document.location.pathname,g=-1!==g.indexOf(";debug",g.length-6),h="/project/"+f.project;g&&(h+=";debug");h+="#"+m.FileTree.cleanResourcePath(f.resource);d.push([{text:f.text,name:f.name,
link:h,style:"resourceNode"}])}return b(d,c)})},null,"Find Files")};e.openTerminal=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:h.Common.getProjectName(),resource:a.getFilePath(),terminal:!0},g.EventBus.sendEvent("EXPLORE",a))};e.exploreDirectory=function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:h.Common.getProjectName(),resource:a.getFilePath(),terminal:!1},g.EventBus.sendEvent("EXPLORE",a))};e.folderExpand=function(a){a={project:h.Common.getProjectName(),
folder:a};g.EventBus.sendEvent("FOLDER_EXPAND",a)};e.folderCollapse=function(a){a={project:h.Common.getProjectName(),folder:a};g.EventBus.sendEvent("FOLDER_COLLAPSE",a)};e.pingProcess=function(){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("PING",h.Common.getProjectName())};e.uploadFileTo=function(a,c,b){c=m.FileTree.createResourcePath(c);c=m.FileTree.cleanResourcePath(c.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+c);a={project:h.Common.getProjectName(),name:a,to:c,data:b,dragAndDrop:!0};
g.EventBus.sendEvent("UPLOAD",a)};e.isDragAndDropFilePossible=function(a,c){return!0};e.dragAndDropFile=function(a,c){var b=a.getResource(),d=c.getResource(),e=m.FileTree.cleanResourcePath(b.getFilePath()),d=m.FileTree.cleanResourcePath(d.getFilePath()+"/"+b.getFileName());console.log("source: "+e+" destination: "+d);var k={project:h.Common.getProjectName(),from:e,to:d,dragAndDrop:!0};g.EventBus.sendEvent("RENAME",k);if(a.isFolder())for(b=a.getChildren(),k=0;k<b.length;k++){var l=b[k],n=h.Common.stringReplaceText(l,
e,d);v.Project.renameEditorTab(m.FileTree.createResourcePath(l),m.FileTree.createResourcePath(n))}else v.Project.renameEditorTab(b,m.FileTree.createResourcePath(d))};e.renameFile=function(a){var c=a.getFilePath();l.DialogBuilder.renameFileTreeDialog(a,!0,function(b){var d={project:h.Common.getProjectName(),from:c,to:b.getFilePath(),dragAndDrop:!1};g.EventBus.sendEvent("RENAME",d);v.Project.renameEditorTab(a,b)})};e.renameDirectory=function(a){var c=a.getFilePath();a=m.FileTree.createResourcePath(c+
".#");l.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:h.Common.getProjectName(),from:c,to:a.getFilePath()};g.EventBus.sendEvent("RENAME",a)})};e.newFile=function(a){l.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!m.FileTree.isResourceFolder(a.getFilePath())){var b={project:h.Common.getProjectName(),resource:a.getFilePath(),source:"",directory:!1,create:!0};q.ProcessConsole.clearConsole();g.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new y.FileResource(a,null,
b,"",null,!1,!1);k.FileEditor.updateEditor(a)}})};e.newDirectory=function(a){l.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){m.FileTree.isResourceFolder(a.getFilePath())&&(a={project:h.Common.getProjectName(),resource:a.getFilePath(),source:"",directory:!0,create:!0},q.ProcessConsole.clearConsole(),g.EventBus.sendEvent("SAVE",a))})};e.saveFile=function(){F(!0,function(a){a()})};e.saveEditorOnClose=function(a,c){null!=c&&c.getResourcePath()&&l.DialogBuilder.openTreeDialog(c,!0,function(b){b=
{project:h.Common.getProjectName(),resource:c.getFilePath(),source:a,directory:!1,create:!1};g.EventBus.sendEvent("SAVE",b);k.FileEditor.clearSavedEditorBuffer(c.getResourcePath())},function(a){k.FileEditor.clearSavedEditorBuffer(c.getResourcePath())})};e.deleteFile=function(a){var c=k.FileEditor.currentEditorState();null==a&&null!=c.getResource()&&(a=c.getResource());null!=a&&(c="Delete resource "+a.getFilePath(),w.Alerts.createConfirmAlert("Delete File",c,"Delete","Cancel",function(){var b={project:h.Common.getProjectName(),
resource:a.getFilePath()};q.ProcessConsole.clearConsole();g.EventBus.sendEvent("DELETE",b);v.Project.deleteEditorTab(a.getResourcePath())},function(){}))};e.deleteDirectory=function(a){null!=a&&(a={project:h.Common.getProjectName(),resource:a.getFilePath()},q.ProcessConsole.clearConsole(),g.EventBus.sendEvent("DELETE",a))};e.createArchive=function(a,c){l.DialogBuilder.createArchiveTreeDialog(a,function(a){a={project:h.Common.getProjectName(),resource:c.getProjectPath(),archive:a.getProjectPath()};
g.EventBus.sendEvent("CREATE_ARCHIVE",a)})};e.runScript=function(){x(!1,!1)};e.runScriptWithArguments=function(){x(!1,!0)};e.debugScript=function(){x(!0,!1)};e.debugScriptWithArguments=function(){x(!0,!0)};e.attachRemoteDebugger=function(){g.EventBus.isSocketOpen()&&w.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e","Attach","Cancel",function(a){a={project:h.Common.getProjectName(),address:a};g.EventBus.sendEvent("REMOTE_DEBUG",a)})};e.updateScriptBreakpoints=function(){var a=
{breakpoints:k.FileEditor.currentEditorState().getBreakpoints(),project:h.Common.getProjectName()};g.EventBus.sendEvent("BREAKPOINTS",a)};e.stepOverScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};e.stepInScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_IN"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",
a))};e.stepOutScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};e.resumeScript=function(){var a=n.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},k.FileEditor.clearEditorHighlights(),g.EventBus.sendEvent("STEP",a))};e.stopScript=function(){g.EventBus.sendEvent("STOP")};e.browseScriptVariables=function(a){var c=n.ThreadManager.focusedThread();null!=
c&&(a={thread:c.getThread(),expand:a},g.EventBus.sendEvent("BROWSE",a))};e.browseScriptEvaluation=function(a,c,b){var d=n.ThreadManager.focusedThread();null!=d&&(a={thread:d.getThread(),expression:c,expand:a,refresh:b},g.EventBus.sendEvent("EVALUATE",a))};e.attachProcess=function(a){var c=H.DebugManager.currentStatusFocus(),b=k.FileEditor.currentEditorState();a={process:a,breakpoints:b.getBreakpoints(),project:h.Common.getProjectName(),focus:c!=a};g.EventBus.sendEvent("ATTACH",a)};e.switchLayout=
function(){var a=window.document.location.pathname,c=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+c):document.location=a+";debug"+c};e.updateDisplay=function(a){g.EventBus.isSocketOpen()&&g.EventBus.sendEvent("DISPLAY_UPDATE",a)};e.evaluateExpression=function(){if(null!=n.ThreadManager.focusedThread()){var a=k.FileEditor.getSelectedText();l.DialogBuilder.evaluateExpressionDialog(a)}};e.refreshScreen=function(){setTimeout(function(){location.reload()},
10)};e.switchProject=function(){document.location="/"}})(u.Command||(u.Command={}))});
