define("require exports jquery common project alert socket console editor tree threads dialog explorer debug".split(" "),function(I,t,r,g,u,v,f,q,l,n,p,m,w,E){(function(b){function t(a){return a&&g.Common.stringEndsWith(a,".jar")}function x(a,d){var c=g.Common.stringReplaceText(a,"\\","/"),h=d.substring(0,d.lastIndexOf(".")),e=d.substring(d.lastIndexOf(".")+1);return"/decompile/"+c+"/"+h+"/"+e+".java"}function F(a,d){a&&1<a.length?r.ajax({url:"/type/"+g.Common.getProjectName()+"?expression\x3d"+a,
success:function(c){var h=[],e;for(e in c)c.hasOwnProperty(e)&&h.push(e);h.sort();e=[];for(var b=0;b<h.length;b++){var k=c[h[b]],k={name:k.name,resource:k.resource,module:k.module,extra:k.extra,type:k.type,project:g.Common.getProjectName()};e.push(k)}d(e,a)},async:!0}):d([],a)}function G(a,d){if(a||""==a){var c=l.FileEditor.getCurrentLineForEditor(),h=l.FileEditor.currentEditorState(),b=JSON.stringify({resource:h.getResource().getProjectPath(),line:c,complete:a.trim(),source:h.getSource()});r.ajax({contentType:"application/json",
data:b,dataType:"json",success:function(c){c=c.outlines;var h=[],b;for(b in c)if(c.hasOwnProperty(b)){var e=c[b];h.push({name:b,type:e.type,resource:e.resource,line:e.line,constraint:e.constraint,declaringClass:e.declaringClass,libraryPath:e.libraryPath})}d(h,a)},error:function(c){d([],a);console.log("Could not complete outline for text '"+a+"'",b)},async:!0,processData:!1,type:"POST",url:"/outline/"+g.Common.getProjectName()})}else d([],a)}function y(a,d){d||(d="*.snap,*.properties,*.xml,*.txt,*.json");
var c=m.DialogBuilder.createTextSearchOnlyDialog;a&&(c=m.DialogBuilder.createTextSearchAndReplaceDialog);c(function(a,d,c,b){z(a,d,c,function(a,d){for(var c=[],h=0;h<a.length;h++){var e=a[h],k=window.document.location.pathname;k.indexOf(";debug",k.length-6);k="/resource/"+e.project+"/"+e.resource;c.push([{text:e.resource,line:e.line,resource:k,style:"resourceNode"},{text:e.text,line:e.line,resource:k,style:"textNode"}])}return b(c,d)})},d,a?"Replace Text":"Find Text")}function z(a,d,c,h){if(a&&1<
a.length){var b;b="/find/"+g.Common.getProjectName();b+="?expression\x3d"+encodeURIComponent(a);b+="\x26pattern\x3d"+encodeURIComponent(d);b+="\x26caseSensitive\x3d"+encodeURIComponent(c.caseSensitive);b+="\x26regularExpression\x3d"+encodeURIComponent(c.regularExpression);b+="\x26wholeWord\x3d"+encodeURIComponent(c.wholeWord);b+="\x26replace\x3d"+encodeURIComponent(c.replace);b+="\x26enableReplace\x3d"+encodeURIComponent(c.enableReplace);r.ajax({url:b,success:function(d){for(var c=[],b=0;b<d.length;b++){var e=
d[b];g.Common.getProjectName();c.push(e)}h(c,a)},async:!0})}else h([],a)}function H(a,d){a&&1<a.length?r.ajax({url:"/file/"+g.Common.getProjectName()+"?expression\x3d"+a,success:function(c){for(var h=[],b=0;b<c.length;b++){var f=c[b];g.Common.getProjectName();h.push(f)}d(h,a)},async:!0}):d([],a)}function A(a,d){if(null==l.FileEditor.currentEditorState().getResource())m.DialogBuilder.openTreeDialog(null,!1,function(c){c=B(a);d(c)});else if(l.FileEditor.isEditorChanged()){var c=B(a);d(c)}else q.ProcessConsole.clearConsole(),
d(function(){})}function B(a){var d=l.FileEditor.currentEditorState(),c=d.getResource();if(null!=c){var b={project:g.Common.getProjectName(),resource:c.getFilePath(),source:d.getSource(),directory:!1,create:!1};q.ProcessConsole.clearConsole();f.EventBus.sendEvent("SAVE",b);if(a)return function(){var a=(new Date).getTime(),a=new w.FileResource(c,null,a,d.getSource(),null,!1,!1);l.FileEditor.updateEditor(a)}}return function(){}}function C(a){A(!0,function(d){setTimeout(function(){var c=function(){setTimeout(function(){l.FileEditor.focusEditor();
d()},1)};a?v.Alerts.createDebugPromptAlert("Debug","Enter arguments","Debug","Cancel",function(a){D(!0,a);c()},function(a){c()}):v.Alerts.createRunPromptAlert("Run","Enter arguments","Run","Cancel",function(a){D(!1,a);c()},function(a){c()})},1)})}function D(a,d){var c=l.FileEditor.currentEditorState(),b=d.split(/[ ]+/),c={breakpoints:c.getBreakpoints(),arguments:b,project:g.Common.getProjectName(),resource:c.getResource().getFilePath(),source:c.getSource(),debug:a?!0:!1};f.EventBus.sendEvent("EXECUTE",
c)}b.searchTypes=function(){m.DialogBuilder.createListDialog(function(a,d,c){F(a,function(a,d){for(var b=[],k=0;k<a.length;k++){var h=window.document.location.pathname,h=-1!==h.indexOf(";debug",h.length-6),e="/project/"+a[k].project,f="\x3ci style\x3d'opacity: 0.5'\x3e"+a[k].module+"\x3ci\x3e",g="";a[k].extra&&(g="\x3ci style\x3d'opacity: 0.5'\x3e"+a[k].extra+"\x3ci\x3e");h&&(e+=";debug");e=t(a[k].extra)?e+("#"+x(a[k].extra,a[k].module+"."+a[k].name)):e+("#"+a[k].resource);b.push([{text:a[k].name+
"\x26nbsp;\x26nbsp;"+f,link:e,line:0,style:"module"==a[k].type?"moduleNode":"typeNode"},{text:a[k].resource+"\x26nbsp;\x26nbsp;"+g,link:e,line:0,style:"resourceNode"}])}c(b,d)})},null,"Search Types")};b.searchOutline=function(){m.DialogBuilder.createListDialog(function(a,d,c){G(a,function(a,d){for(var b=[],h=0;h<a.length;h++){var e=a[h],f=e.type.toLowerCase(),l="\x3ci style\x3d'opacity: 0.5'\x3e"+e.constraint+"\x3ci\x3e",n;n=e.declaringClass;n=n.substring(n.lastIndexOf(".")+1);var m=e.declaringClass,
m="\x3ci style\x3d'opacity: 0.5'\x3e"+m.substring(0,m.lastIndexOf("."))+"\x3ci\x3e",p=e.resource,q=e.line,r=null;t(e.libraryPath)&&e.declaringClass?(r="/project/"+g.Common.getProjectName()+"#"+x(e.libraryPath,e.declaringClass),q=null):p="/resource/"+g.Common.getProjectName()+p;b.push([{text:e.name+"\x26nbsp;\x26nbsp;"+l,resource:p,link:r,line:q,style:"function"==f?"functionNode":"propertyNode"},{text:n+"\x26nbsp;\x26nbsp;"+m,resource:p,link:r,line:q,style:"resourceNode"}])}c(b,d)})},null,"Search Outline")};
b.replaceTokenInFiles=function(a,d,c){z(a,c,d,function(a){for(var d=l.FileEditor.currentEditorState(),c=0;c<a.length;c++){var b=a[c],b=n.FileTree.createResourcePath("/resource/"+b.project+"/"+b.resource);d.getResource().getResourcePath()==b.getResourcePath()&&w.FileExplorer.openTreeFile(b.getResourcePath(),function(){})}})};b.searchFiles=function(a){y(!1,a)};b.searchAndReplaceFiles=function(a){y(!0,a)};b.findFileNames=function(){m.DialogBuilder.createListDialog(function(a,d,c){H(a,function(a,d){for(var b=
[],e=0;e<a.length;e++){var h=a[e],f=window.document.location.pathname,f=-1!==f.indexOf(";debug",f.length-6),g="/project/"+h.project;f&&(g+=";debug");g+="#"+h.resource;b.push([{text:h.text,name:h.name,link:g,style:"resourceNode"}])}return c(b,d)})},null,"Find Files")};b.openTerminal=function(a){n.FileTree.isResourceFolder(a.getFilePath())&&(a={project:g.Common.getProjectName(),resource:a.getFilePath(),terminal:!0},f.EventBus.sendEvent("EXPLORE",a))};b.exploreDirectory=function(a){n.FileTree.isResourceFolder(a.getFilePath())&&
(a={project:g.Common.getProjectName(),resource:a.getFilePath(),terminal:!1},f.EventBus.sendEvent("EXPLORE",a))};b.folderExpand=function(a){a={project:g.Common.getProjectName(),folder:a};f.EventBus.sendEvent("FOLDER_EXPAND",a)};b.folderCollapse=function(a){a={project:g.Common.getProjectName(),folder:a};f.EventBus.sendEvent("FOLDER_COLLAPSE",a)};b.pingProcess=function(){f.EventBus.isSocketOpen()&&f.EventBus.sendEvent("PING",g.Common.getProjectName())};b.uploadFileTo=function(a,d,c){d=n.FileTree.createResourcePath(d);
d=n.FileTree.cleanResourcePath(d.getFilePath()+"/"+a);console.log("source: "+a+" destination: "+d);a={project:g.Common.getProjectName(),name:a,to:d,data:c,dragAndDrop:!0};f.EventBus.sendEvent("UPLOAD",a)};b.isDragAndDropFilePossible=function(a,d){return!0};b.dragAndDropFile=function(a,d){var c=a.getResource(),b=d.getResource(),e=n.FileTree.cleanResourcePath(c.getFilePath()),b=n.FileTree.cleanResourcePath(b.getFilePath()+"/"+c.getFileName());console.log("source: "+e+" destination: "+b);var l={project:g.Common.getProjectName(),
from:e,to:b,dragAndDrop:!0};f.EventBus.sendEvent("RENAME",l);if(a.isFolder())for(c=a.getChildren(),l=0;l<c.length;l++){var k=c[l],m=g.Common.stringReplaceText(k,e,b);u.Project.renameEditorTab(n.FileTree.createResourcePath(k),n.FileTree.createResourcePath(m))}else u.Project.renameEditorTab(c,n.FileTree.createResourcePath(b))};b.renameFile=function(a){var d=a.getFilePath();m.DialogBuilder.renameFileTreeDialog(a,!0,function(c){var b={project:g.Common.getProjectName(),from:d,to:c.getFilePath(),dragAndDrop:!1};
f.EventBus.sendEvent("RENAME",b);u.Project.renameEditorTab(a,c)})};b.renameDirectory=function(a){var d=a.getFilePath();a=n.FileTree.createResourcePath(d+".#");m.DialogBuilder.renameDirectoryTreeDialog(a,!0,function(a){a={project:g.Common.getProjectName(),from:d,to:a.getFilePath()};f.EventBus.sendEvent("RENAME",a)})};b.newFile=function(a){m.DialogBuilder.newFileTreeDialog(a,!0,function(a){if(!n.FileTree.isResourceFolder(a.getFilePath())){var b={project:g.Common.getProjectName(),resource:a.getFilePath(),
source:"",directory:!1,create:!0};q.ProcessConsole.clearConsole();f.EventBus.sendEvent("SAVE",b);b=(new Date).getTime();a=new w.FileResource(a,null,b,"",null,!1,!1);l.FileEditor.updateEditor(a)}})};b.newDirectory=function(a){m.DialogBuilder.newDirectoryTreeDialog(a,!0,function(a){n.FileTree.isResourceFolder(a.getFilePath())&&(a={project:g.Common.getProjectName(),resource:a.getFilePath(),source:"",directory:!0,create:!0},q.ProcessConsole.clearConsole(),f.EventBus.sendEvent("SAVE",a))})};b.saveFile=
function(){A(!0,function(a){a()})};b.saveEditorOnClose=function(a,b){null!=b&&b.getResourcePath()&&m.DialogBuilder.openTreeDialog(b,!0,function(c){c={project:g.Common.getProjectName(),resource:b.getFilePath(),source:a,directory:!1,create:!1};f.EventBus.sendEvent("SAVE",c);l.FileEditor.clearSavedEditorBuffer(b.getResourcePath())},function(a){l.FileEditor.clearSavedEditorBuffer(b.getResourcePath())})};b.deleteFile=function(a){var b=l.FileEditor.currentEditorState();null==a&&null!=b.getResource()&&(a=
b.getResource());null!=a&&(b="Delete resource "+a.getFilePath(),v.Alerts.createConfirmAlert("Delete File",b,"Delete","Cancel",function(){var b={project:g.Common.getProjectName(),resource:a.getFilePath()};q.ProcessConsole.clearConsole();f.EventBus.sendEvent("DELETE",b);u.Project.deleteEditorTab(a.getResourcePath())},function(){}))};b.deleteDirectory=function(a){null!=a&&(a={project:g.Common.getProjectName(),resource:a.getFilePath()},q.ProcessConsole.clearConsole(),f.EventBus.sendEvent("DELETE",a))};
b.createArchive=function(a,b){m.DialogBuilder.createArchiveTreeDialog(a,function(a){a={project:g.Common.getProjectName(),resource:b.getProjectPath(),archive:a.getProjectPath()};f.EventBus.sendEvent("CREATE_ARCHIVE",a)})};b.runScript=function(){C(!1)};b.debugScript=function(){C(!0)};b.attachRemoteDebugger=function(){f.EventBus.isSocketOpen()&&v.Alerts.createRemoteDebugPromptAlert("Remote Debug","Enter \x3chost\x3e:\x3cport\x3e","Attach","Cancel",function(a){a={project:g.Common.getProjectName(),address:a};
f.EventBus.sendEvent("REMOTE_DEBUG",a)})};b.updateScriptBreakpoints=function(){var a={breakpoints:l.FileEditor.currentEditorState().getBreakpoints(),project:g.Common.getProjectName()};f.EventBus.sendEvent("BREAKPOINTS",a)};b.stepOverScript=function(){var a=p.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OVER"},l.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.stepInScript=function(){var a=p.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),
type:"STEP_IN"},l.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.stepOutScript=function(){var a=p.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"STEP_OUT"},l.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.resumeScript=function(){var a=p.ThreadManager.focusedThread();null!=a&&(a={thread:a.getThread(),type:"RUN"},l.FileEditor.clearEditorHighlights(),f.EventBus.sendEvent("STEP",a))};b.stopScript=function(){f.EventBus.sendEvent("STOP")};
b.browseScriptVariables=function(a){var b=p.ThreadManager.focusedThread();null!=b&&(a={thread:b.getThread(),expand:a},f.EventBus.sendEvent("BROWSE",a))};b.browseScriptEvaluation=function(a,b,c){var d=p.ThreadManager.focusedThread();null!=d&&(a={thread:d.getThread(),expression:b,expand:a,refresh:c},f.EventBus.sendEvent("EVALUATE",a))};b.attachProcess=function(a){var b=E.DebugManager.currentStatusFocus(),c=l.FileEditor.currentEditorState();a={process:a,breakpoints:c.getBreakpoints(),project:g.Common.getProjectName(),
focus:b!=a};f.EventBus.sendEvent("ATTACH",a)};b.switchLayout=function(){var a=window.document.location.pathname,b=window.document.location.hash;-1!==a.indexOf(";debug",a.length-6)?(a=a.substring(0,a.length-6),document.location=a+b):document.location=a+";debug"+b};b.updateDisplay=function(a){f.EventBus.isSocketOpen()&&f.EventBus.sendEvent("DISPLAY_UPDATE",a)};b.evaluateExpression=function(){if(null!=p.ThreadManager.focusedThread()){var a=l.FileEditor.getSelectedText();m.DialogBuilder.evaluateExpressionDialog(a)}};
b.refreshScreen=function(){setTimeout(function(){location.reload()},10)};b.switchProject=function(){document.location="/"}})(t.Command||(t.Command={}))});
