define("require exports jquery w2ui ./common ./socket ./editor ./profiler ./variables ./console ./threads status commands tree".split(" "),function(H,m,h,u,p,r,z,A,v,B,t,C,D,w){(function(n){function m(){var a=p.Common.currentTime(),b={},c=0,d;for(d in f)if(f.hasOwnProperty(d)){var e=f[d];null!=e&&(e.getTime()+1E4>a?b[d]=e:c++)}f=b;0<c&&l();D.Command.pingProcess()}function x(a,b,c){c=JSON.parse(c);if(a=c.process)b=f[a],c=c.duration,f[a]=null,console.log(a+" is TERMINATED"),c&&b&&console.log("Process took "+
c+" ms");g==a&&(t.ThreadManager.terminateThreads(),y());l()}function E(a,b,c){b=JSON.parse(c);a=b.process;c=b.status;var d=Math.round(b.usedMemory/b.totalMemory*100),e=k[c];c&&k.hasOwnProperty(c)||(e=k.UNKNOWN,console.warn("No such status "+c+" setting to "+k[e]));b=f[a]=new F(a,b.project,b.resource,b.system,b.pid,e,b.time,b.running,b.debug,b.focus,d,b.threads);b.getDescription();b.getResource();b.isFocus()?(b=f[a],null!=b&&null!=b.getResource()?(w.FileTree.createResourcePath(b.getResource()),h("#toolbarDebug").css("opacity",
"1.0"),h("#toolbarDebug").css("filter","alpha(opacity\x3d100)"),C.StatusPanel.showProcessStatus(b.getResource(),a,b.isDebug())):(h("#toolbarDebug").css("opacity","0.4"),h("#toolbarDebug").css("filter","alpha(opacity\x3d40)"),h("#process").html(""),z.FileEditor.clearEditorHighlights()),g!=a&&(A.Profiler.clearProfiler(),t.ThreadManager.clearThreads(),v.VariableManager.clearVariables()),B.ProcessConsole.updateConsoleFocus(a),g=a):g==a&&y();l()}function y(){g=null;t.ThreadManager.clearThreads();v.VariableManager.clearVariables();
h("#toolbarDebug").css("opacity","0.4");h("#toolbarDebug").css("filter","alpha(opacity\x3d40)");h("#process").html("")}function G(){f={};g=null;u.w2ui.debug.records=[];u.w2ui.debug.refresh()}function l(){var a=[],b=1,c;for(c in f)if(f.hasOwnProperty(c)){var d=f[c];if(null!=d){var e=d.getProject();if(e==p.Common.getProjectName()||null==e){var e="\x3cdiv class\x3d'debugIdleRecord'\x3e"+c+"\x3c/div\x3e",h="\x26nbsp;\x3cinput type\x3d'radio'\x3e\x3clabel\x3e\x3c/label\x3e",q="",m=d.isDebug(),n=d.getStatus(),
l=!1;g==c&&(h="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e\x3clabel\x3e\x3c/label\x3e");null!=d.getResource()&&(q=w.FileTree.createResourcePath(d.getResource()),e=g==c&&m?"\x3cdiv class\x3d'debugFocusRecord'\x3e"+c+"\x3c/div\x3e":"\x3cdiv class\x3d'debugRecord'\x3e"+c+"\x3c/div\x3e",q=q.getResourcePath(),l=!0);a.push({recid:b++,name:e,active:h,process:c,status:k[n],running:l,system:d.getSystem(),pid:d.getPid(),resource:d.getResource(),focus:g==c,script:q})}else console.log("Ignoring process "+
c+" as it belongs to "+e)}}p.Common.updateTableRecords(a,"debug")}var k;(function(a){a[a.REGISTERING=0]="REGISTERING";a[a.WAITING=1]="WAITING";a[a.STARTING=2]="STARTING";a[a.COMPILING=3]="COMPILING";a[a.DEBUGGING=4]="DEBUGGING";a[a.RUNNING=5]="RUNNING";a[a.TERMINATING=6]="TERMINATING";a[a.FINISHED=7]="FINISHED";a[a.UNKNOWN=8]="UNKNOWN"})(k||(k={}));var F=function(){function a(a,c,d,e,f,g,h,k,l,m,n,p){this._process=a;this._resource=d;this._system=e;this._pid=f;this._time=h;this._running=k;this._focus=
m;this._project=c;this._memory=n;this._threads=p;this._debug=l;this._status=g}a.prototype.getDescription=function(){return this._resource?this._process+" is "+k[this._status]+" with "+this._resource+" focus is "+this.isFocus():this._process+" is "+k[this._status]};a.prototype.getStatus=function(){return this._status};a.prototype.getProcess=function(){return this._process};a.prototype.getProject=function(){return this._project};a.prototype.getResource=function(){return this._resource};a.prototype.getSystem=
function(){return this._system};a.prototype.getPid=function(){return this._pid};a.prototype.getMemory=function(){return this._memory};a.prototype.getThreads=function(){return this._threads};a.prototype.getTime=function(){return this._time};a.prototype.isFocus=function(){return"true"==""+this._focus};a.prototype.isRunning=function(){return"true"==""+this._running};a.prototype.isDebug=function(){return"true"==""+this._debug};return a}(),f={},g=null;n.createStatus=function(){r.EventBus.createRoute("STATUS",
E,G);r.EventBus.createRoute("TERMINATE",x,null);r.EventBus.createRoute("EXIT",x,null);setInterval(m,1E3)};n.isCurrentStatusFocusRunning=function(){if(g){var a=f[g];if(a)return null!=a.getResource()}return!1};n.currentStatusFocus=function(){return g};n.showStatus=l})(m.DebugManager||(m.DebugManager={}))});
