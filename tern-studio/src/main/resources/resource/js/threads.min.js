define("require exports jquery w2ui socket common tree editor variables explorer profiler status problem".split(" "),function(J,e,C,u,n,D,v,d,l,w,E,F,G){(function(b){b[b.RUNNING=0]="RUNNING";b[b.SUSPENDED=1]="SUSPENDED";b[b.UNKNOWN=2]="UNKNOWN"})(e.ThreadStatus||(e.ThreadStatus={}));var h=e.ThreadStatus,q=function(){function b(b,d,h,e,g,l,m,n,p,k,q,f,c){this._variables=b;this._evaluation=d;this._status=h;this._instruction=e;this._process=g;this._resource=l;this._source=m;this._thread=n;this._stack=
p;this._line=k;this._depth=q;this._change=c;this._key=f}b.prototype.getVariables=function(){return this._variables};b.prototype.getEvaluation=function(){return this._evaluation};b.prototype.getStatus=function(){return this._status};b.prototype.getInstruction=function(){return this._instruction};b.prototype.getProcess=function(){return this._process};b.prototype.getResource=function(){return this._resource};b.prototype.getSource=function(){return this._source};b.prototype.getThread=function(){return this._thread};
b.prototype.getStack=function(){return this._stack};b.prototype.getLine=function(){return this._line};b.prototype.getDepth=function(){return this._depth};b.prototype.getKey=function(){return this._key};b.prototype.getChange=function(){return this._change};return b}();e.ThreadScope=q;var g=function(){function b(b){this._variables=b}b.prototype.getVariables=function(){return this._variables};return b}();e.ThreadVariables=g;(function(b){function e(a,b,c){a=JSON.parse(c);f={};p();l.VariableManager.clearVariables();
E.Profiler.clearProfiler();r();F.StatusPanel.showProcessStatus(a.resource,a.process,a.debug)}function x(a,b,f){a=JSON.parse(f).process;null!=c&&c.getProcess()==a&&y()}function y(){f={};p();d.FileEditor.clearEditorHighlights();G.ProblemManager.highlightProblems();l.VariableManager.clearVariables();r()}function r(){p();u.w2ui.threads.records=[];u.w2ui.threads.refresh();C("#process").html("")}function H(a,b,t){a=JSON.parse(t);b=a.status;t=new g(a.variables);var I=new g(a.evaluation),e=h[b];b&&h.hasOwnProperty(b)||
(e=h.UNKNOWN,console.warn("No such thread status "+b+" setting to "+h[e]));a=new q(t,I,e,a.instruction,a.process,a.resource,a.source,a.thread,a.stack,a.line,a.depth,a.key,a.change);b=c&&c.getThread()==a.getThread()?a.getStatus()!=h.SUSPENDED:!1;if(b)p(),m(a),d.FileEditor.clearEditorHighlights();else if(c&&c.getThread()==a.getThread()){a:{if(c&&c.getThread()==a.getThread()&&a.getStatus()==h.SUSPENDED){if(c.getKey()!=a.getKey()){b=!0;break a}if(c.getChange()!=a.getChange()){b=!0;break a}}b=!1}b&&(c&&
c.getThread()==a.getThread()&&c.getLine()!=a.getLine()?c&&c.getThread()==a.getThread()&&d.FileEditor.currentEditorState().getResource().getFilePath()!=a.getResource()?A(a):(k(a),d.FileEditor.showEditorLine(a.getLine())):k(a),m(a))}else c&&null!=c.getThread()?(b=f[a.getThread()],(null!=b&&null!=a?b.getThread()!=a.getThread()||b.getStatus()!=a.getStatus()||b.getResource()!=a.getResource()||b.getLine()!=a.getLine():b!=a)&&m(a)):((b=d.FileEditor.currentEditorState())&&b.getResource()&&b.getResource().getFilePath()==
a.getResource()?(k(a),d.FileEditor.showEditorLine(a.getLine())):A(a),m(a));f[a.getThread()]=a;z(a)}function z(a){var b=d.FileEditor.currentEditorState();c.getThread()==a.getThread()&&b.getResource().getFilePath()==a.getResource()&&a.getStatus()==h.SUSPENDED&&d.FileEditor.createEditorHighlight(a.getLine(),"threadHighlight")&&d.FileEditor.showEditorLine(a.getLine())}function m(a){f[a.getThread()]=a;B();l.VariableManager.showVariables()}function A(a){var b=v.FileTree.createResourcePath(a.getResource()),
c=a.getSource();c?w.FileExplorer.showAsTreeFile(b.getResourcePath(),c,function(){k(a);d.FileEditor.showEditorLine(a.getLine())}):w.FileExplorer.openTreeFile(b.getResourcePath(),function(){k(a);d.FileEditor.showEditorLine(a.getLine())})}function p(){l.VariableManager.clearVariables();c=new q(new g({}),new g({}),h.RUNNING,null,null,null,null,null,null,-1,-1,-1,-1)}function k(a){c=a=new q(a.getVariables(),a.getEvaluation(),a.getStatus(),a.getInstruction(),a.getProcess(),a.getResource(),a.getSource(),
a.getThread(),a.getStack(),a.getLine(),a.getDepth(),a.getKey(),a.getChange());m(a)}function B(){var a=[],b=1,e;for(e in f)if(f.hasOwnProperty(e)){var d=f[e],g="threadSuspended",k="\x26nbsp;\x3cinput type\x3d'radio'\x3e";z(d);d.getStatus()!=h.SUSPENDED?g="threadRunning":c.getThread()==d.getThread()&&(k="\x26nbsp;\x3cinput type\x3d'radio' checked\x3e");var g="\x3cdiv title\x3d'"+d.getStack()+"' class\x3d'"+g+"'\x3e"+e+"\x3c/div\x3e",l=v.FileTree.createResourcePath(d.getResource());a.push({recid:b++,
name:g,thread:e,status:h[d.getStatus()],active:k,instruction:d.getInstruction(),variables:d.getVariables(),resource:d.getResource(),key:d.getKey(),line:d.getLine(),script:l.getResourcePath()})}D.Common.updateTableRecords(a,"threads")}var f={},c=null;b.createThreads=function(){n.EventBus.createRoute("BEGIN",e,r);n.EventBus.createRoute("SCOPE",H,l.VariableManager.clearVariables);n.EventBus.createRoute("TERMINATE",x);n.EventBus.createRoute("EXIT",x)};b.terminateThreads=y;b.clearThreads=r;b.focusedThread=
function(){return c&&null!=c.getThread()?f[c.getThread()]:null};b.updateThreadFocusByName=function(a){k(f[a])};b.focusedThreadVariables=function(){if(c&&null!=c.getThread()){var a=f[c.getThread()];if(null!=a)return a.getVariables()}return new g({})};b.focusedThreadEvaluation=function(){if(c&&null!=c.getThread()){var a=f[c.getThread()];if(null!=a)return a.getEvaluation()}return new g({})};b.showThreads=B})(e.ThreadManager||(e.ThreadManager={}))});
