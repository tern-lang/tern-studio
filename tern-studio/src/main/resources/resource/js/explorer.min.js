define("require exports jquery common socket tree editor commands".split(" "),function(z,m,l,f,r,n,v,e){var q=function(){function d(d,f,e,k,g,h,l){this._resourcePath=d;this._contentType=f;this._lastModified=e;this._fileContent=k;this._downloadURL=g;this._isHistorical=h;this._isError=l}d.prototype.getFileContent=function(){if(this._fileContent){var d=this._resourcePath.getResourcePath().toLowerCase();if(f.Common.stringEndsWith(d,".json"))try{var e=JSON.parse(this._fileContent);return JSON.stringify(e,
null,3)}catch(p){}return this._fileContent}return""};d.prototype.getResourcePath=function(){return this._resourcePath};d.prototype.getContentType=function(){return this._contentType};d.prototype.getDownloadURL=function(){return this._downloadURL};d.prototype.getTimeStamp=function(){return f.Common.formatTimeMillis(this._lastModified)};d.prototype.getLastModified=function(){return this._lastModified};d.prototype.getFileLength=function(){return this._fileContent?this._fileContent.length:-1};d.prototype.isHistorical=
function(){return this._isHistorical};d.prototype.isError=function(){return this._isError};return d}();m.FileResource=q;(function(d){function m(a,c,b){p()}function w(a,c,b){(a=JSON.parse(b).resource)&&k(a,function(){})}function p(){n.FileTree.createTree("/"+f.Common.getProjectName(),"explorer","explorerTree","/.",!1,x,function(a,c){c.node.isFolder()||e.Command.openTreeFile(c.node.tooltip)})}function k(a,c){var b=a.toLowerCase();t(b)?l.ajax({url:a,type:"get",dataType:"text",success:function(b,d,e){b=
g(a,a,e,b,!1,!1);h(b,c)},error:function(b){b=g(a,a,null,b,!1,!0);h(b,c)},async:!1}):l.ajax({url:a,type:"get",success:function(b,d,e){b=g(a,a,e,b,!1,!1);h(b,c)},error:function(b){b=g(a,a,null,b,!1,!0);h(b,c)},async:!1})}function g(a,c,b,e,d,f){var u=n.FileTree.createResourcePath(a),g=(new Date).getTime(),h="application/octet-stream";return b&&null!=e?(a=b.getResponseHeader("content-type"),(b=b.getResponseHeader("last-modified"))&&(g=(new Date(b)).getTime()),a&&(h=a),new q(u,h,g,e,c,d,f)):new q(u,"text/plain",
g,"// Count not find "+a,c,d,f)}function h(a,c){var b;b=(b=a.getContentType())&&f.Common.stringStartsWith(b,"image")?!0:!1;b?(b=a.getDownloadURL(),window.open(b,"_blank").focus()):(b=a.getContentType())&&("application/json"==b||"application/x-javascript"==b?0:f.Common.stringStartsWith(b,"application")||f.Common.stringStartsWith(b,"image")||!f.Common.stringStartsWith(b,"text"))?window.location.href=a.getDownloadURL():v.FileEditor.updateEditor(a);c()}function t(a){return f.Common.stringEndsWith(a,".json")||
f.Common.stringEndsWith(a,".js")||f.Common.stringEndsWith(a,".xml")||f.Common.stringEndsWith(a,".project")||f.Common.stringEndsWith(a,".classpath")||f.Common.stringEndsWith(a,".index")}function x(a,c,b,d){"runScript"==c?k(a.getResourcePath(),function(){e.Command.runScript()}):"debugScript"==c?k(a.getResourcePath(),function(){e.Command.debugScript()}):"createArchive"==c?(c=n.FileTree.createResourcePath("/"+f.Common.getProjectName()+".jar"),e.Command.createArchive(c,a)):"newFile"==c?e.Command.newFile(a):
"newDirectory"==c?e.Command.newDirectory(a):"exploreDirectory"==c?e.Command.exploreDirectory(a):"openTerminal"==c?e.Command.openTerminal(a):"renameFile"==c?d?e.Command.renameDirectory(a):e.Command.renameFile(a):"saveFile"==c?k(a.getResourcePath(),function(){e.Command.saveFile()}):"deleteFile"==c&&(n.FileTree.isResourceFolder(a.getResourcePath())?e.Command.deleteDirectory(a):e.Command.deleteFile(a))}var y=function(){function a(a,b){this._contentType=a;this._lastModified=b}a.prototype.getResponseHeader=
function(a){a=a.toLowerCase();return"content-type"==a?this._contentType:"last-modified"==a?this._lastModified:null};return a}();d.showTree=function(){p();r.EventBus.createRoute("RELOAD_TREE",m);r.EventBus.createRoute("OPEN",w)};d.showAsTreeFile=function(a,c,b){a.toLowerCase();var d=new y("text/plain",(new Date).getTime());a=g(a,a,d,c,!1,!1);h(a,b)};d.openTreeFile=k;d.openTreeHistoryFile=function(a,c,b){var d=a.toLowerCase(),e=a.replace(/^\/resource/i,"/history");if(t(d)){var f=e+"?time\x3d"+c;l.ajax({url:f,
type:"get",dataType:"text",success:function(c,d,e){c=g(a,f,e,c,!0,!1);h(c,b)},error:function(c){c=g(a,f,null,c,!0,!0);h(c,b)},async:!1})}else f=e+"?time\x3d"+c,l.ajax({url:f,type:"get",success:function(c,d,e){c=g(a,f,e,c,!0,!1);h(c,b)},error:function(c){c=g(a,f,null,c,!0,!0);h(c,b)},async:!1})}})(m.FileExplorer||(m.FileExplorer={}))});
