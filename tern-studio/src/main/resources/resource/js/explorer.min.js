define("require exports jquery common socket tree editor commands".split(" "),function(y,n,k,e,u,l,v,f){var p=function(){function d(d,e,f,g,h,k,l){this._resourcePath=d;this._contentType=e;this._lastModified=f;this._fileContent=g;this._downloadURL=h;this._isHistorical=k;this._isError=l}d.prototype.getFileContent=function(){if(this._fileContent){var d=this._resourcePath.getResourcePath().toLowerCase();if(e.Common.stringEndsWith(d,".json"))try{var f=JSON.parse(this._fileContent);return JSON.stringify(f,
null,3)}catch(m){}return this._fileContent}return""};d.prototype.getResourcePath=function(){return this._resourcePath};d.prototype.getContentType=function(){return this._contentType};d.prototype.getDownloadURL=function(){return this._downloadURL};d.prototype.getTimeStamp=function(){return e.Common.formatTimeMillis(this._lastModified)};d.prototype.getLastModified=function(){return this._lastModified};d.prototype.getFileLength=function(){return this._fileContent?this._fileContent.length:-1};d.prototype.isHistorical=
function(){return this._isHistorical};d.prototype.isError=function(){return this._isError};return d}();n.FileResource=p;(function(d){function n(a,b,c){q()}function q(){l.FileTree.createTree("/"+e.Common.getProjectName(),"explorer","explorerTree","/.",!1,w,function(a,b){b.node.isFolder()||m(b.node.tooltip,function(){})})}function m(a,b){var c=a.toLowerCase();r(c)?k.ajax({url:a,type:"get",dataType:"text",success:function(c,d,e){c=g(a,a,e,c,!1,!1);h(c,b)},error:function(c){c=g(a,a,null,c,!1,!0);h(c,
b)},async:!1}):k.ajax({url:a,type:"get",success:function(c,d,e){c=g(a,a,e,c,!1,!1);h(c,b)},error:function(c){c=g(a,a,null,c,!1,!0);h(c,b)},async:!1})}function g(a,b,c,d,e,f){var t=l.FileTree.createResourcePath(a),g=(new Date).getTime(),h="application/octet-stream";return c&&null!=d?(a=c.getResponseHeader("content-type"),(c=c.getResponseHeader("last-modified"))&&(g=(new Date(c)).getTime()),a&&(h=a),new p(t,h,g,d,b,e,f)):new p(t,"text/plain",g,"// Count not find "+a,b,e,f)}function h(a,b){var c;c=(c=
a.getContentType())&&e.Common.stringStartsWith(c,"image")?!0:!1;c?(c=a.getDownloadURL(),window.open(c,"_blank").focus()):(c=a.getContentType())&&("application/json"==c||"application/x-javascript"==c?0:e.Common.stringStartsWith(c,"application")||e.Common.stringStartsWith(c,"image")||!e.Common.stringStartsWith(c,"text"))?window.location.href=a.getDownloadURL():v.FileEditor.updateEditor(a);b()}function r(a){return e.Common.stringEndsWith(a,".json")||e.Common.stringEndsWith(a,".js")||e.Common.stringEndsWith(a,
".xml")||e.Common.stringEndsWith(a,".project")||e.Common.stringEndsWith(a,".classpath")||e.Common.stringEndsWith(a,".index")}function w(a,b,c,d){"runScript"==b?m(a.getResourcePath(),function(){f.Command.runScript()}):"debugScript"==b?m(a.getResourcePath(),function(){f.Command.debugScript()}):"createArchive"==b?(b=l.FileTree.createResourcePath("/"+e.Common.getProjectName()+".jar"),f.Command.createArchive(b,a)):"newFile"==b?f.Command.newFile(a):"newDirectory"==b?f.Command.newDirectory(a):"exploreDirectory"==
b?f.Command.exploreDirectory(a):"openTerminal"==b?f.Command.openTerminal(a):"renameFile"==b?d?f.Command.renameDirectory(a):f.Command.renameFile(a):"saveFile"==b?m(a.getResourcePath(),function(){f.Command.saveFile()}):"deleteFile"==b&&(l.FileTree.isResourceFolder(a.getResourcePath())?f.Command.deleteDirectory(a):f.Command.deleteFile(a))}var x=function(){function a(a,c){this._contentType=a;this._lastModified=c}a.prototype.getResponseHeader=function(a){a=a.toLowerCase();return"content-type"==a?this._contentType:
"last-modified"==a?this._lastModified:null};return a}();d.showTree=function(){q();u.EventBus.createRoute("RELOAD_TREE",n)};d.showAsTreeFile=function(a,b,c){a.toLowerCase();var d=new x("text/plain",(new Date).getTime());a=g(a,a,d,b,!1,!1);h(a,c)};d.openTreeFile=m;d.openTreeHistoryFile=function(a,b,c){var d=a.toLowerCase(),e=a.replace(/^\/resource/i,"/history");if(r(d)){var f=e+"?time\x3d"+b;k.ajax({url:f,type:"get",dataType:"text",success:function(b,d,e){b=g(a,f,e,b,!0,!1);h(b,c)},error:function(b){b=
g(a,f,null,b,!0,!0);h(b,c)},async:!1})}else f=e+"?time\x3d"+b,k.ajax({url:f,type:"get",success:function(b,d,e){b=g(a,f,e,b,!0,!1);h(b,c)},error:function(b){b=g(a,f,null,b,!0,!0);h(b,c)},async:!1})}})(n.FileExplorer||(n.FileExplorer={}))});
