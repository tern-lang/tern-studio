define("require exports w2ui common socket tree editor project".split(" "),function(u,g,v,f,n,p,k,q){(function(h){function g(){var a={},d;for(d in e)if(e.hasOwnProperty(d)){var b=e[d];if(null!=b){var c=b.getResourcePath(),c=k.FileEditor.getEditorBufferForResource(c.getResourcePath()),f=b;c.getResource();var g=f.getTime(),h=c.getLastModified();g<h||f.isExpired()&&!c.isBufferCurrent()||(a[d]=b)}}d=0;for(var l in e)a.hasOwnProperty(l)||d++;0<d&&(e=a,m())}function m(){var a=[],d=1,b;for(b in e)if(e.hasOwnProperty(b)){var c=
e[b];null!=c&&a.push({recid:d++,line:c.getLine(),location:"Line "+c.getLine(),resource:c.getResourcePath().getFilePath(),description:c.getMessage(),project:c.getProject(),script:c.getResourcePath().getResourcePath()})}return f.Common.updateTableRecords(a,"problems")?(l(),q.Project.showProblemsTab(a.length),!0):!1}function l(){var a=k.FileEditor.currentEditorState().getResource();if(null!=a){var d=[],b;for(b in e)if(e.hasOwnProperty(b)&&f.Common.stringStartsWith(b,a.getResourcePath())){var c=e[b];
null!=c&&d.push(c.getLine())}k.FileEditor.clearEditorHighlights();0<d.length&&k.FileEditor.createMultipleEditorHighlights(d,"problemHighlight")}}function r(a,d,b){a=JSON.parse(b);d=p.FileTree.createResourcePath(a.resource);b=new t(d,a.line,a.message,"\x3cdiv class\x3d'errorDescription' title\x3d'"+f.Common.escapeHtml(a.description)+"'\x3e"+a.message+"\x3c/div\x3e",a.project,a.time);0<=a.line?console.log("Add problem '"+b.getDescription()+"' at line '"+b.getLine()+"'"):console.log("Clear all problems for "+
b.getResourcePath()+"");if(0<=b.getLine())e[b.getKey()]=b;else for(var c in e)e.hasOwnProperty(c)&&f.Common.stringStartsWith(c,d.getResourcePath())&&(e[c]=null);m()}var t=function(){function a(a,b,c,e,f,g){this._description=c;this._resource=a;this._line=b;this._message=e;this._project=f;this._time=g}a.prototype.isExpired=function(){return this._time+12E4<f.Common.currentTime()};a.prototype.getKey=function(){return this._resource.getResourcePath()+":"+this._line};a.prototype.getResourcePath=function(){return this._resource};
a.prototype.getLine=function(){return this._line};a.prototype.getDescription=function(){return this._description};a.prototype.getMessage=function(){return this._message};a.prototype.getProject=function(){return this._project};a.prototype.getTime=function(){return this._time};return a}(),e={};h.registerProblems=function(){n.EventBus.createRoute("PROBLEM",r);setInterval(g,1E3)};h.showProblems=m;h.highlightProblems=l})(g.ProblemManager||(g.ProblemManager={}))});
